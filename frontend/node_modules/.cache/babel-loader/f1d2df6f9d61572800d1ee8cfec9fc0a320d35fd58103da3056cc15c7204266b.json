{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Blog=()=>{const{user}=useContext(AuthContext);const[posts,setPosts]=useState([]);const[title,setTitle]=useState('');const[content,setContent]=useState('');const[author,setAuthor]=useState('');useEffect(()=>{const fetchPosts=async()=>{const res=await axios.get('http://localhost:5000/api/posts');setPosts(res.data);};fetchPosts();},[]);const handleSubmit=async e=>{e.preventDefault();await axios.post('http://localhost:5000/api/posts',{title,content,author},{headers:{Authorization:\"Bearer \".concat(user.token)}});setTitle('');setContent('');setAuthor('');const res=await axios.get('http://localhost:5000/api/posts');setPosts(res.data);};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Blog Posts\"}),user&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Content\",value:content,onChange:e=>setContent(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Author\",value:author,onChange:e=>setAuthor(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Post\"})]}),/*#__PURE__*/_jsx(\"div\",{children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'1rem',margin:'1rem 0'},children:[/*#__PURE__*/_jsx(\"h3\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.content}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"em\",{children:[\"By \",post.author]})})]},post._id))})]});};export default Blog;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","AuthContext","jsx","_jsx","jsxs","_jsxs","Blog","user","posts","setPosts","title","setTitle","content","setContent","author","setAuthor","fetchPosts","res","get","data","handleSubmit","e","preventDefault","post","headers","Authorization","concat","token","style","padding","children","onSubmit","type","placeholder","value","onChange","target","required","map","border","margin","_id"],"sources":["C:/Users/gurra/OneDrive/Desktop/sujith/sujith-blog/personal-blog/frontend/src/pages/Blog.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nconst Blog = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const [posts, setPosts] = useState([]);\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [author, setAuthor] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      const res = await axios.get('http://localhost:5000/api/posts');\r\n      setPosts(res.data);\r\n    };\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await axios.post('http://localhost:5000/api/posts', { title, content, author }, {\r\n      headers: { Authorization: `Bearer ${user.token}` },\r\n    });\r\n    setTitle('');\r\n    setContent('');\r\n    setAuthor('');\r\n    const res = await axios.get('http://localhost:5000/api/posts');\r\n    setPosts(res.data);\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '2rem' }}>\r\n      <h1>Blog Posts</h1>\r\n      {user && (\r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n          />\r\n          <textarea\r\n            placeholder=\"Content\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Author\"\r\n            value={author}\r\n            onChange={(e) => setAuthor(e.target.value)}\r\n            required\r\n          />\r\n          <button type=\"submit\">Add Post</button>\r\n        </form>\r\n      )}\r\n      <div>\r\n        {posts.map((post) => (\r\n          <div key={post._id} style={{ border: '1px solid #ccc', padding: '1rem', margin: '1rem 0' }}>\r\n            <h3>{post.title}</h3>\r\n            <p>{post.content}</p>\r\n            <p><em>By {post.author}</em></p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Blog;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAE9D,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,OAASC,WAAW,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAEC,IAAK,CAAC,CAAGR,UAAU,CAACE,WAAW,CAAC,CACxC,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,CAAC,iCAAiC,CAAC,CAC9DT,QAAQ,CAACQ,GAAG,CAACE,IAAI,CAAC,CACpB,CAAC,CACDH,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAtB,KAAK,CAACuB,IAAI,CAAC,iCAAiC,CAAE,CAAEb,KAAK,CAAEE,OAAO,CAAEE,MAAO,CAAC,CAAE,CAC9EU,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYnB,IAAI,CAACoB,KAAK,CAAG,CACnD,CAAC,CAAC,CACFhB,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,EAAE,CAAC,CACdE,SAAS,CAAC,EAAE,CAAC,CACb,KAAM,CAAAE,GAAG,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,CAAC,iCAAiC,CAAC,CAC9DT,QAAQ,CAACQ,GAAG,CAACE,IAAI,CAAC,CACpB,CAAC,CAED,mBACEd,KAAA,QAAKuB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC9B3B,IAAA,OAAA2B,QAAA,CAAI,YAAU,CAAI,CAAC,CAClBvB,IAAI,eACHF,KAAA,SAAM0B,QAAQ,CAAEX,YAAa,CAAAU,QAAA,eAC3B3B,IAAA,UACE6B,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,OAAO,CACnBC,KAAK,CAAExB,KAAM,CACbyB,QAAQ,CAAGd,CAAC,EAAKV,QAAQ,CAACU,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC1CG,QAAQ,MACT,CAAC,cACFlC,IAAA,aACE8B,WAAW,CAAC,SAAS,CACrBC,KAAK,CAAEtB,OAAQ,CACfuB,QAAQ,CAAGd,CAAC,EAAKR,UAAU,CAACQ,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC5CG,QAAQ,MACT,CAAC,cACFlC,IAAA,UACE6B,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,QAAQ,CACpBC,KAAK,CAAEpB,MAAO,CACdqB,QAAQ,CAAGd,CAAC,EAAKN,SAAS,CAACM,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC3CG,QAAQ,MACT,CAAC,cACFlC,IAAA,WAAQ6B,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnC,CACP,cACD3B,IAAA,QAAA2B,QAAA,CACGtB,KAAK,CAAC8B,GAAG,CAAEf,IAAI,eACdlB,KAAA,QAAoBuB,KAAK,CAAE,CAAEW,MAAM,CAAE,gBAAgB,CAAEV,OAAO,CAAE,MAAM,CAAEW,MAAM,CAAE,QAAS,CAAE,CAAAV,QAAA,eACzF3B,IAAA,OAAA2B,QAAA,CAAKP,IAAI,CAACb,KAAK,CAAK,CAAC,cACrBP,IAAA,MAAA2B,QAAA,CAAIP,IAAI,CAACX,OAAO,CAAI,CAAC,cACrBT,IAAA,MAAA2B,QAAA,cAAGzB,KAAA,OAAAyB,QAAA,EAAI,KAAG,CAACP,IAAI,CAACT,MAAM,EAAK,CAAC,CAAG,CAAC,GAHxBS,IAAI,CAACkB,GAIV,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}